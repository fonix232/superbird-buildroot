cmake_minimum_required(VERSION 3.5)
project(ipc-system-service)
set(IPC_SYSTEM_SERVICE ipc-system-service)

set(SOURCE_FILES
        src/daemon.c
        src/main.c
        )

set(DAEMON_NAME ${IPC_SYSTEM_SERVICE})
set(DAEMON_MAJOR_VERSION 1)
set(DAEMON_MINOR_VERSION 1)
set(DAEMON_PATCH_VERSION 0)
set(DAEMON_PID_FILE_NAME ${DAEMON_NAME}.pid)
set(DAEMON_LOG_FILE_NAME ${DAEMON_NAME}.log)
set(DAEMON_NO_CHDIR 1)
set(DAEMON_NO_CLOSE_STDIO 0)

add_executable(${IPC_SYSTEM_SERVICE} ${SOURCE_FILES})
target_include_directories(${IPC_SYSTEM_SERVICE} PUBLIC
        src/
        )

target_link_libraries(${IPC_SYSTEM_SERVICE}
        pthread)

target_compile_definitions(${IPC_SYSTEM_SERVICE}
  PRIVATE DAEMON_NAME="${DAEMON_NAME}"
  PRIVATE DAEMON_MAJOR_VERSION="${DAEMON_MAJOR_VERSION}"
  PRIVATE DAEMON_MINOR_VERSION="${DAEMON_MINOR_VERSION}"
  PRIVATE DAEMON_PATCH_VERSION="${DAEMON_PATCH_VERSION}"
  PRIVATE DAEMON_PID_FILE_NAME="${DAEMON_PID_FILE_NAME}"
  PRIVATE DAEMON_LOG_FILE_NAME="${DAEMON_LOG_FILE_NAME}"
  PRIVATE DAEMON_NO_CHDIR=${DAEMON_NO_CHDIR}
  PRIVATE DAEMON_NO_CLOSE_STDIO=${DAEMON_NO_CLOSE_STDIO}
  )
