                                                                                     +----------------------------------------------------------------------------------+
                                                                                     |                                                                                  |
                                                                                     | +-------------------+  In case of h265 output to main stream                     |
                                                                                     | | Video Buffer pool |  new h264 should be created for the webstream              |
                                                                                     | +-------------------+                                                            |
                                                                                     |                     |                                                            |
                                                                                     |                     +-->+------------+   +-------+    +-------+   +-----------+  |
                                                                                     |                         | GE2D Scale +-->+ Queue +--->+ VENC3 +-->+ WebStream |  |
                                                                                     |                 +------>+------------+   +-------+    +-------+   +-----------+  |
                                                                                     |                 |                                                                |
                                                                                     +----------------------------------------------------------------------------------+
                                                                                                       |
                                                                                                       |
                                                                                                       |                  +---------------------------------------------+
                                                                                                       |                  |                       In case of h264       |
                                                                                                       |                  |         +-----------+ output to main stream |
                                                                                                       |                  |     +-->+ WebStream | encoded stream reused |
                        +---------------+                                                              |                  |     |   +-----------+                       |
                        | Image Capture |                                                              |                  |     |                                       |
                    +-->+---------------+                                                              |                  +---------------------------------------------+
                    |                                                                                  |                        |
               +----+      +-------------------+                +----------+                           |                        |
               | FR |      | Video Buffer pool +--+         +-->+ Sheiding |                           |                +-------+   +------+
               +----+      +-------------------+  |         |   +----------+                           |            +-->+ VENC1 +-->+ RTSP |
                    |                             v         |                                          |            |   +-------+   +------+
                    +-->+-----+                   +---------+   +--------+   +-----+   +---------------+   +--------+           |
                        | GDC +------------------>+ Rotator +-->+ Queue1 +-->+ OSD +-->+ GE2D Blending +-->+ Queue  |           |
                    +-->+-----+                   +---------+   +--------+   +-----+   +---------------+   +--------+           |
                    |                                                                                  |                        | +-------------------------------------+
+-------------------+                                                                                  |                        | |                                     |
| Video Buffer pool |                                                                                  |                        | | +-----------+                       |
+-------------------+                                                                                  |                        +-->+ MP4 Muxer |                       |
                                                                                                       |                          | +-----------+                       |
                                                                                                       |                          |                                     |
                                                                                                       |                          +-------------------------------------+
                                                                                                       |
                                                                                                       +-->+------------+   +-------+    +-------+   +------+
                                                                                                           | GE2D Scale +-->+ Queue +--->+ VENC2 +-->+ RTSP |
                                                                                                       +-->+------------+   +-------+    +-------+   +------+
                                                                                                       |
                                                                                   +-------------------+
                                                                                   | Video Buffer pool |
                                                                                   +-------------------+

                 +-----+                 +----------+
                 | DS1 |             +-->+ Sheiding |
                 +-----+             |   +----------+
                       |             |
                       +-->+---------+   +-------+   +-----+
                           | Rotator +-->+ Queue +-->+ NN  |
                       +-->+---------+   +-------+   +-----+
                       |
   +-------------------+
   | Video Buffer pool |
   +-------------------+

